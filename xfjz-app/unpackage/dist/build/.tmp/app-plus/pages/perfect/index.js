(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/perfect/index"],{"0875":function(t,e,a){"use strict";(function(t,n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("2f62");a("4065");function o(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),n.forEach(function(e){r(t,e,a[e])})}return t}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var s=function(){return a.e("components/popup").then(a.bind(null,"be0d"))},u={data:function(){return{isShowPopup:!0,isShowTextArea:!1,date:"19900101",index:0,name:"",areaVal:"",tel:"",tag:"",array:["男","女"]}},computed:o({},(0,i.mapState)(["tipsPopup"]),(0,i.mapGetters)(["token","avatarUrl","mobile","tags"]),{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}}),mounted:function(){this.$nextTick(function(){this.switch_tips_dialog(!1),this.getData()})},components:{popup:s},methods:o({},(0,i.mapMutations)(["switch_tips_dialog","updataAvatar","setMobile","setTag","setNickname"]),{ChooseImage:function(){var e=this;t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(a){var i=a.tempFilePaths;t.uploadFile({url:"http://ubase.qianr.com/api/public/?service=user.updateAvatar",filePath:i[0],name:"file",formData:{token:e.token},header:{"content-type":"multipart/form-data"},success:function(t){var a=t.data;a=JSON.parse(a),e.$store.commit("updateAvatar",a.data.avatar_thumb)},fail:function(t){console.log(n(t," at pages\\perfect\\index.vue:138"))},complete:function(){}})}})},bindPickerChange:function(t){console.log(n("picker发送选择改变，携带值为",t.target.value," at pages\\perfect\\index.vue:146")),this.index=t.target.value},bindDateChange:function(t){this.date=t.target.value.replace(/-/gi,""),console.log(n("picker发送选择改变，携带值为",this.date," at pages\\perfect\\index.vue:151"))},getDate:function(t){var e=new Date,a=e.getFullYear(),n=e.getMonth()+1,i=e.getDate();return"start"===t?a-=60:"end"===t&&(a+=2),n=n>9?n:"0"+n,i=i>9?i:"0"+i,"".concat(a,"-").concat(n,"-").concat(i)},getData:function(){var e=this;t.showLoading(),this.$http.get("/v1/user/resume-view",{params:{token:this.token}}).then(function(a){if(console.log(n(a," at pages\\perfect\\index.vue:177")),1==a.data.code){var i=a.data.data,o=Object.keys(i);o.length>0&&(e.date=i.birth,e.name=i.real_name,e.index=+i.sex-1,e.areaVal=i.summary,""!=e.areaVal&&(e.isShowTextArea=!0),e.tel=i.mobile,e.tag=i.tag,e.setNickname(i.real_name),e.setMobile(i.mobile),e.setTag(i.tag))}setTimeout(function(){t.hideLoading()},300)}).catch(function(e){setTimeout(function(){t.hideLoading()},300)})},postData:function(){var e=this;if(""==this.name||""==this.tel||""==this.tag||""==this.areaVal)return t.showToast({icon:"none",title:"请填写完整信息"}),!1;var a=/^(((13[0-9]{1})|(15[0-9]{1})|(18[0-9]{1}))+\d{8})$/;if(!a.test(this.tel))return t.showToast({icon:"none",title:"手机号格式不正确"}),!1;t.showLoading({title:"提交中"}),this.$http.post("/v1/user/resume",{token:this.token,real_name:this.name,birth:this.date,sex:+this.index+1,mobile:this.tel,tag:this.tag,summary:this.areaVal}).then(function(a){if(console.log(n(a," at pages\\perfect\\index.vue:236")),0==a.data.code)return t.showToast({icon:"none",title:a.data.msg}),!1;1==a.data.code&&(e.switch_tips_dialog(!0),e.setNickname(e.name),e.setMobile(e.tel),e.setTag(e.tag),setTimeout(function(){t.navigateBack({delta:1}),e.switch_tips_dialog(!1)},1e3)),setTimeout(function(){t.hideLoading()},300)}).catch(function(e){setTimeout(function(){t.hideLoading()},300)})}})};e.default=u}).call(this,a("6e42")["default"],a("0de9")["default"])},"47a5":function(t,e,a){"use strict";(function(t){a("1567"),a("921b");n(a("66fd"));var e=n(a("9698"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,a("6e42")["createPage"])},4888:function(t,e,a){"use strict";var n,i=function(){var t=this,e=t.$createElement;t._self._c;t._isMounted||(t.e0=function(e){t.isShowTextArea=!0})},o=[];a.d(e,"b",function(){return i}),a.d(e,"c",function(){return o}),a.d(e,"a",function(){return n})},9698:function(t,e,a){"use strict";a.r(e);var n=a("4888"),i=a("f37a");for(var o in i)"default"!==o&&function(t){a.d(e,t,function(){return i[t]})}(o);a("e685");var r,s=a("f0c5"),u=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,null,null,!1,n["a"],r);e["default"]=u.exports},d34a:function(t,e,a){},e685:function(t,e,a){"use strict";var n=a("d34a"),i=a.n(n);i.a},f37a:function(t,e,a){"use strict";a.r(e);var n=a("0875"),i=a.n(n);for(var o in n)"default"!==o&&function(t){a.d(e,t,function(){return n[t]})}(o);e["default"]=i.a}},[["47a5","common/runtime","common/vendor"]]]);