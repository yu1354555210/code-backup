(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"31d1":function(t,e,n){"use strict";var o=n("c728"),i=n.n(o);i.a},9398:function(t,e,n){"use strict";(function(t){n("c4f9");o(n("66fd"));var e=o(n("af5e"));function o(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("543d")["createPage"])},af5e:function(t,e,n){"use strict";n.r(e);var o=n("eab6"),i=n("b598");for(var a in i)"default"!==a&&function(t){n.d(e,t,(function(){return i[t]}))}(a);n("31d1");var s,r=n("f0c5"),u=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],s);e["default"]=u.exports},b58b:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n("1537")),i=n("2f62");function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var c=function(){Promise.all([n.e("common/vendor"),n.e("components/mescroll-uni/mescroll-uni")]).then(function(){return resolve(n("824a"))}.bind(null,n)).catch(n.oe)},d=function(){n.e("components/countUp").then(function(){return resolve(n("f4d5"))}.bind(null,n)).catch(n.oe)},l=function(){n.e("components/vDialog").then(function(){return resolve(n("8fe0"))}.bind(null,n)).catch(n.oe)},h={mixins:[o.default],data:function(){return{swiperList:{},redbagData:{myPack:0,isNewPerson:!1},redbagResultData:{money:"",status:""},redbagCurData:{info:"新手红包",id:"",money:"",type:1},timer:null,num:12.68,bag1animation:{},openbrnanimation:{},rbagmodelshow:!1,openrbagmodelshow:!1,listRedbagBgList:{normalBg:"https://app1-api.qianr.com/static/bonus/list-redbag-normal.png",openBg:"https://app1-api.qianr.com/static/bonus/list-redbag-open.png",endBg:"https://app1-api.qianr.com/static/bonus/list-redbag-end.png"},dialogType:2,dataList:[],mescroll:null,onlineStatus:!1,downOption:{use:!1,auto:!0},upOption:{use:!0,auto:!1,page:{num:0,size:10},textColor:"#fff",noMoreSize:5,textNoMore:"已全部加载"},newsList:[],videoAd:null,videoCount:0}},computed:r(r({},(0,i.mapGetters)(["getDialogStatus","getLoginStatus","token","getInfo"])),(0,i.mapState)(["loginDialogStatus"])),onShareAppMessage:function(t){return t.from,{title:"天天领红包",imageUrl:"https://app1-api.qianr.com/static/bonus/share.png",path:"/pages/index/index?inviteCode=".concat(this.getInfo.invite_code)}},components:{countup:d,vDialog:l,MescrollUni:c},watch:{getLoginStatus:function(t,e){t&&this.getHomeData()}},onShow:function(){var t=this;this.onlineStatus&&(this.getLoginStatus||this.setLoginDialogStatus(),this.getHomeData(),this.hourlyRefresh((function(e,n){console.log("执行整点计划 =>","".concat(e,":").concat(n)),t.getHomeData()})))},onLoad:function(e){e&&this.setInviteCode(e.inviteCode),wx.createRewardedVideoAd&&(this.videoAd=wx.createRewardedVideoAd({adUnitId:"adunit-3718775ed7c3516f"}),this.videoAd.onLoad((function(){})),this.videoAd.onError((function(e){console.log("视频加载失败"),t.showToast({icon:"none",title:"广告显示失败"})}))),this.countTimer()>=0?this.onlineStatus=!0:(t.setNavigationBarTitle({title:"红包攻略"}),this.onlineStatus=!1,this.mescroll.resetUpScroll(),t.hideTabBar())},mounted:function(){this.$nextTick((function(){}))},methods:r(r({},(0,i.mapMutations)(["setDialogStatus","setLoginDialogStatus","setInviteCode"])),{},{openModel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;this.rbagmodelshow=!0,1==t?(this.redbagCurData.type=1,this.redbagCurData.info="".concat(this.redbagCurData.money,"元现金")):(this.redbagCurData.type=2,this.redbagCurData.info="新手红包")},hideModel:function(){this.rbagmodelshow=!1},openBtn:function(){var e=this,n=t.createAnimation({duration:1e3,timingFunction:"ease"});this.openbrnanimation=n,n.rotateY(360).step(),this.openbrnanimation=n.export(),1==this.redbagCurData.type?this.showVideoAd():this.getNewPersonRedbagResult(),setTimeout((function(){n.rotateY(0).step(),e.openbrnanimation=n.export()}),1e3)},showVideoAd:function(){var e=this;if(t.showLoading({title:"广告加载中"}),this.videoAd.onClose((function(n){e.videoAd&&(e.videoAd.offClose(),n&&n.isEnded?(e.adVideoRes(),e.videoCount++):t.showToast({icon:"none",title:"播放中途退出，不下发奖励"}))})),this.videoAd){var n=3;this.videoAd.show().then((function(){t.hideLoading(),(e.videoCount+1)%n==0&&t.showToast({icon:"none",duration:1e4,title:"点击下方按钮，可能触发惊喜"})})).catch((function(){t.hideLoading(),e.videoAd.load().then((function(){return e.videoAd.show()})).catch((function(e){t.showToast({icon:"none",title:"广告显示失败"}),console.log("激励视频 广告显示失败")}))}))}},adVideoRes:function(){this.getItemRedbagResult()},showResultModel:function(){this.rbagmodelshow=!1,this.openrbagmodelshow=!0,this.openbrnanimation={}},getItemRedbagResult:function(){var e=this;this.$http.post("/api/bonus/v1/lead_bonus",{token:this.token,bonus_id:this.redbagCurData.id}).then((function(n){if(e.redbagResultData.status=n.data.status,200==n.data.status){var o=n.data.data;e.redbagResultData.money=o.money,e.showResultModel()}else t.showToast({icon:"none",title:n.data.msg})})).catch((function(e){t.showToast({icon:"none",title:"系统错误，请稍后重试"})}))},getNewPersonRedbagResult:function(){var e=this;this.$http.post("/api/bonus/v1/lead_new",{token:this.token}).then((function(n){if(e.redbagResultData.status=n.data.status,200==n.data.status){var o=n.data.data;e.redbagResultData.money=o.money,e.showResultModel()}else t.showToast({icon:"none",title:n.data.msg})})).catch((function(e){t.showToast({icon:"none",title:"系统错误，请稍后重试"})}))},hideOpenBtn:function(){this.openrbagmodelshow=!1,this.redbagResultData.money="",this.getHomeData()},showOpenBtn:function(){this.openrbagmodelshow=!0},lookBagbtn:function(){},jump:function(){t.switchTab({url:"/pages/task/task"})},toResultPage:function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e=n?n.id:this.redbagCurData.id,t.navigateTo({url:"../redbag-result/redbag-result?id=".concat(e,"&type=").concat(this.redbagCurData.type)})},getHomeData:function(){var e=this;this.$http.get("/api/bonus/v1/index",{params:{token:this.token}}).then((function(n){if(200==n.data.status){var o=n.data.data;e.swiperList=o.banner,e.dataList=o.series,e.redbagData.myPack=o.my_pack,e.redbagData.isNewPerson=o.show}else t.showToast({icon:"none",title:n.data.msg})})).catch((function(e){t.showToast({icon:"none",title:"系统错误，请稍后重试"})}))},openItemRedbag:function(t){var e=this;this.checkLogin((function(){1===t.status&&(0===e.redbagData.myPack?(e.dialogType=2,e.setDialogStatus()):(e.redbagCurData.id=t.id,e.redbagCurData.money=t.money,e.openModel(1)))}))},openNewPersonRedbag:function(){var t=this;this.checkLogin((function(){t.openModel(2)}))},addNum:function(){var t=this;this.checkLogin((function(){t.dialogType=1,t.setDialogStatus()}))},hourlyRefresh:function(t){var e,n,o,i,a;this.timer=setInterval((function(){e=new Date,n=e.getHours(),o=e.getMinutes(),i=e.getSeconds(),0!==o&&30!==o||i<10&&(a?a=!1:(a=!0,t(n,o)))}),1e3)},countTimer:function(){var t=(new Date).getTime(),e=new Date("2021/2/20 17:00:00").getTime();return t-e},mescrollInit:function(t){this.mescroll=t},upCallback:function(e){var n=this;t.showLoading({title:"加载中"});var o=e.num,i=e.size;t.request({url:"https://mini-gl.binglue.com/article/list",method:"GET",data:{page:o,pageSize:i,id:100},success:function(o){t.hideLoading();var i=o.data.data;o.xxx,o.xxx,o.xxx;1==e.num&&(n.newsList=[]),i&&(n.newsList=n.newsList.concat(i)),i&&void 0!==i||(i=[]),e.endSuccess(i.length),n.$nextTick((function(){e.endSuccess(i.length)}))},fail:function(){e.endErr(),t.hideLoading()}})},toDetail:function(e){t.navigateTo({url:"../detail/detail?id="+e})}}),onHide:function(){this.setDialogStatus(!1),this.rbagmodelshow=!1,this.openrbagmodelshow=!1,clearInterval(this.timer)}};e.default=h}).call(this,n("543d")["default"])},b598:function(t,e,n){"use strict";n.r(e);var o=n("b58b"),i=n.n(o);for(var a in o)"default"!==a&&function(t){n.d(e,t,(function(){return o[t]}))}(a);e["default"]=i.a},c728:function(t,e,n){},eab6:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o}));var o={mescrollUni:function(){return Promise.all([n.e("common/vendor"),n.e("components/mescroll-uni/mescroll-uni")]).then(n.bind(null,"824a"))}},i=function(){var t=this,e=t.$createElement;t._self._c},a=[]}},[["9398","common/runtime","common/vendor"]]]);